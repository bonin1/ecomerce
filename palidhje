<div  class="card-body">
    <img class="img-card" src="<%= row.foto_produktit %>" alt="">
    <h2 class="title-card"><%= row.emri_produktit %></h2>
    <h2 class="cmimi-card"><%= row.cmimi_produktit%>€</h2>
    <% if (row.sasia_produktit > 0) { %>
        <h2 class="sasia-card">Sasia: <%= row.sasia_produktit %></h2>
        <div class="add-to-card12">
            <button class="add-to-cart" data-id="<%= row.id %>" class="add-to-card" data-is-logged-in="<%= isLoggedIn %>">Add to cart</button>
        </div>
    <% } else { %>
        <p>Out of stock</p>
    <% } %>
</div>




app.post('/cart', (req, res) => {
    if (!req.session.isLoggedIn) {
        return res.redirect('/login');
    }


    const userId = req.session.userId;
    const itemId = req.body.id;
    const quantity = req.body.quantity;


    db.query(
        'INSERT INTO cart (user_id, produkt_id, quantity) VALUES (?, ?, ?)',
        [userId, itemId, quantity],
        (err, results) => {
            if (err) {
                console.error(err);
                res.sendStatus(500);
                return;
            }
            res.render('cart');
        }
    );
});




<% items.forEach(item => { %>
    <% let total = 0; %>
    <% items.forEach(item => { %>
        <% total += item.cmimi_produktit * item.quantity; %>
    <% }); %>
    <p class="total-price">Total price: <%= total %>€</p>